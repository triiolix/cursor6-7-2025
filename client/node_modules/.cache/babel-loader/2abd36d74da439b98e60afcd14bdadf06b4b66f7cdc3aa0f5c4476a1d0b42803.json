{"ast":null,"code":"import { io } from 'socket.io-client';\nclass SocketService {\n  constructor() {\n    this.socket = null;\n    this.url = void 0;\n    this.url = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\n  }\n  connect() {\n    if (!this.socket) {\n      this.socket = io(this.url);\n    }\n    return this.socket;\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n  joinDocument(documentId) {\n    if (this.socket) {\n      this.socket.emit('join-document', documentId);\n    }\n  }\n  sendDocumentChange(change) {\n    if (this.socket) {\n      this.socket.emit('document-change', change);\n    }\n  }\n  sendCursorPosition(position) {\n    if (this.socket) {\n      this.socket.emit('cursor-position', position);\n    }\n  }\n  onDocumentUpdate(callback) {\n    if (this.socket) {\n      this.socket.on('document-update', callback);\n    }\n  }\n  onCursorUpdate(callback) {\n    if (this.socket) {\n      this.socket.on('cursor-update', callback);\n    }\n  }\n  onUserJoined(callback) {\n    if (this.socket) {\n      this.socket.on('user-joined', callback);\n    }\n  }\n  onUserLeft(callback) {\n    if (this.socket) {\n      this.socket.on('user-left', callback);\n    }\n  }\n  removeAllListeners() {\n    if (this.socket) {\n      this.socket.removeAllListeners();\n    }\n  }\n  getSocket() {\n    return this.socket;\n  }\n}\nexport default new SocketService();","map":{"version":3,"names":["io","SocketService","constructor","socket","url","process","env","REACT_APP_SOCKET_URL","connect","disconnect","joinDocument","documentId","emit","sendDocumentChange","change","sendCursorPosition","position","onDocumentUpdate","callback","on","onCursorUpdate","onUserJoined","onUserLeft","removeAllListeners","getSocket"],"sources":["/workspace/client/src/services/socket.ts"],"sourcesContent":["import { io, Socket } from 'socket.io-client';\nimport { DocumentChange, CursorPosition } from '../types';\n\nclass SocketService {\n  private socket: Socket | null = null;\n  private readonly url: string;\n\n  constructor() {\n    this.url = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\n  }\n\n  connect(): Socket {\n    if (!this.socket) {\n      this.socket = io(this.url);\n    }\n    return this.socket;\n  }\n\n  disconnect(): void {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n\n  joinDocument(documentId: string): void {\n    if (this.socket) {\n      this.socket.emit('join-document', documentId);\n    }\n  }\n\n  sendDocumentChange(change: DocumentChange): void {\n    if (this.socket) {\n      this.socket.emit('document-change', change);\n    }\n  }\n\n  sendCursorPosition(position: CursorPosition): void {\n    if (this.socket) {\n      this.socket.emit('cursor-position', position);\n    }\n  }\n\n  onDocumentUpdate(callback: (data: any) => void): void {\n    if (this.socket) {\n      this.socket.on('document-update', callback);\n    }\n  }\n\n  onCursorUpdate(callback: (data: any) => void): void {\n    if (this.socket) {\n      this.socket.on('cursor-update', callback);\n    }\n  }\n\n  onUserJoined(callback: (userId: string) => void): void {\n    if (this.socket) {\n      this.socket.on('user-joined', callback);\n    }\n  }\n\n  onUserLeft(callback: (userId: string) => void): void {\n    if (this.socket) {\n      this.socket.on('user-left', callback);\n    }\n  }\n\n  removeAllListeners(): void {\n    if (this.socket) {\n      this.socket.removeAllListeners();\n    }\n  }\n\n  getSocket(): Socket | null {\n    return this.socket;\n  }\n}\n\nexport default new SocketService();"],"mappings":"AAAA,SAASA,EAAE,QAAgB,kBAAkB;AAG7C,MAAMC,aAAa,CAAC;EAIlBC,WAAWA,CAAA,EAAG;IAAA,KAHNC,MAAM,GAAkB,IAAI;IAAA,KACnBC,GAAG;IAGlB,IAAI,CAACA,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,IAAI,uBAAuB;EACxE;EAEAC,OAAOA,CAAA,EAAW;IAChB,IAAI,CAAC,IAAI,CAACL,MAAM,EAAE;MAChB,IAAI,CAACA,MAAM,GAAGH,EAAE,CAAC,IAAI,CAACI,GAAG,CAAC;IAC5B;IACA,OAAO,IAAI,CAACD,MAAM;EACpB;EAEAM,UAAUA,CAAA,EAAS;IACjB,IAAI,IAAI,CAACN,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACM,UAAU,CAAC,CAAC;MACxB,IAAI,CAACN,MAAM,GAAG,IAAI;IACpB;EACF;EAEAO,YAAYA,CAACC,UAAkB,EAAQ;IACrC,IAAI,IAAI,CAACR,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACS,IAAI,CAAC,eAAe,EAAED,UAAU,CAAC;IAC/C;EACF;EAEAE,kBAAkBA,CAACC,MAAsB,EAAQ;IAC/C,IAAI,IAAI,CAACX,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACS,IAAI,CAAC,iBAAiB,EAAEE,MAAM,CAAC;IAC7C;EACF;EAEAC,kBAAkBA,CAACC,QAAwB,EAAQ;IACjD,IAAI,IAAI,CAACb,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACS,IAAI,CAAC,iBAAiB,EAAEI,QAAQ,CAAC;IAC/C;EACF;EAEAC,gBAAgBA,CAACC,QAA6B,EAAQ;IACpD,IAAI,IAAI,CAACf,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACgB,EAAE,CAAC,iBAAiB,EAAED,QAAQ,CAAC;IAC7C;EACF;EAEAE,cAAcA,CAACF,QAA6B,EAAQ;IAClD,IAAI,IAAI,CAACf,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACgB,EAAE,CAAC,eAAe,EAAED,QAAQ,CAAC;IAC3C;EACF;EAEAG,YAAYA,CAACH,QAAkC,EAAQ;IACrD,IAAI,IAAI,CAACf,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACgB,EAAE,CAAC,aAAa,EAAED,QAAQ,CAAC;IACzC;EACF;EAEAI,UAAUA,CAACJ,QAAkC,EAAQ;IACnD,IAAI,IAAI,CAACf,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACgB,EAAE,CAAC,WAAW,EAAED,QAAQ,CAAC;IACvC;EACF;EAEAK,kBAAkBA,CAAA,EAAS;IACzB,IAAI,IAAI,CAACpB,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACoB,kBAAkB,CAAC,CAAC;IAClC;EACF;EAEAC,SAASA,CAAA,EAAkB;IACzB,OAAO,IAAI,CAACrB,MAAM;EACpB;AACF;AAEA,eAAe,IAAIF,aAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}